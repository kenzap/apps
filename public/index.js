!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function t(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const n=(e,...t)=>{if(0===(e=String(e)).length)return"";return((e,t,...a)=>{let n=(e,t)=>(t.forEach(((t,a)=>{e=e.replace("%"+(a+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?n(e,a):n(t(window.i18n.state.locale.values[e]),a)})(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},o=()=>{let e=document.querySelector(".loader");e&&(e.style.display="block")},l=()=>{let e=document.querySelector(".loader");e&&(e.style.display="none")},i=e=>{let t=new URLSearchParams(window.location.search),a=t.get("sid")?t.get("sid"):"",n=-1==e.indexOf("?")?"?sid="+a:"&sid="+a;return e+n},s=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},r=e=>{let t=e+"=",a=decodeURIComponent(document.cookie).split(";");for(let e=0;e<a.length;e++){let n=a[e];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},d=()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+s()+"/"+r("locale");return t!=r("check")&&(e=0,console.log("refresh")),((e,t,a)=>{let n="";if(a){let e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3),n=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+n+";path=/;domain=.kenzap.cloud"})("check",t,5),e},c=()=>({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r("kenzap_api_key"),"Kenzap-Locale":r("locale")?r("locale"):"en","Kenzap-Header":d(),"Kenzap-Token":r("kenzap_token"),"Kenzap-Sid":s()});r("kenzap_api_key"),r("locale")&&r("locale"),d(),r("kenzap_token"),s();const p=e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let a=new URLSearchParams;return a.append("cmd","report"),a.append("sid",s()),a.append("token",r("kenzap_token")),a.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:a}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)},u=e=>{if(!document.querySelector(".toast")){let e='\n        <div class="toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center" style="z-index:10000;">\n            <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3000">\n                <div class="d-flex">\n                    <div class="toast-body"></div>\n                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n                </div>\n            </div>\n        </div>';document.querySelector("body > div")&&document.querySelector("body > div").insertAdjacentHTML("afterend",e)}let t=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=e,t.show()};var m,h,v,f=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var o=a[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""};new(m=function e(a,s){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"initDashboard",(function(){fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:c(),body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:f("kenzap_token")},locale:{type:"locale",source:["extension"],key:"ecommerce"}}})}).then((function(e){return e.json()})).then((function(e){e.success?((e=>{if(e.header&&localStorage.setItem("header",e.header),!document.querySelector("#k-script")){let e=document.createElement("div");e.innerHTML=localStorage.getItem("header"),e=e.firstChild,document.body.prepend(e),Function(document.querySelector("#k-script").innerHTML).call("test")}e.locale&&window.i18n.init(e.locale)})(e),r.getData()):p(e)})).catch((function(e){console.error("Error:",e)}))})),t(this,"getData",(function(){r.state.firstLoad&&o(),fetch("https://apps.api.kenzap.cloud/",{method:"post",headers:c(),body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:f("kenzap_token")},keys:{type:"api-key",keys:["private"]},apps:{type:"get-apps",fields:["_id","id","img","status","title","description","keywords","users","updated"],search:{field:"title",s:""},sortby:{field:"created",order:"DESC"}},locale:{type:"locale",id:f("lang")}}})}).then((function(e){return e.json()})).then((function(e){var t,a;e.success?e.success&&(r.state.response=e,console.log(r.state.response),r.html(),r.render(),r.listeners(),t=__("Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.",'<a class="text-muted" href="https://kenzap.com/" target="_blank">',"</a>",'<a class="text-muted" href="https://github.com/kenzap/apps" target="_blank">',"</a>"),a="",document.querySelector("footer .row").innerHTML=`\n    <div class="d-sm-flex justify-content-center justify-content-sm-between">\n        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">${t}</span>\n        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted">${a}</span>\n    </div>`,r.state.firstLoad=!1):p(e)})).catch((function(e){console.error("Error:",e)}))})),t(this,"html",(function(){document.querySelector("#contents").innerHTML='\n        <div class="container p-edit">\n            <div class="d-flex justify-content-between bd-highlight mb-3">\n                <nav class="bc" aria-label="breadcrumb"></nav>\n                <div class="d-none-">\n                    <button class="btn btn-primary btn-new-app d-flex align-items-center" type="button">\n                        <span class="d-flex" role="status" aria-hidden="true">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle me-2" viewBox="0 0 16 16">\n                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n                        </span> '.concat(n("New application"),'\n                    </button>\n                </div>\n            </div>\n            <div class="row">\n                <div id="mydata-chart"></div>\n            </div>\n        </div>\n\n        <div class="modal" tabindex="-1">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title"></h5>\n                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                    </div>\n                    <div class="modal-body">\n\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-primary btn-modal"></button>\n                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n    ')})),t(this,"render",(function(){var e=r;(e=>{let t='<ol class="breadcrumb mt-2 mb-0">';for(let a of e)void 0===a.link?t+=`<li class="breadcrumb-item">${a.text}</li>`:t+=`<li class="breadcrumb-item"><a href="${a.link}">${a.text}</a></li>`;t+="</ol>",document.querySelector(".bc").innerHTML=t})([{link:i("https://dashboard.kenzap.cloud?launcher=mydata"),text:__("Home")},{text:__("Applications")}]),am4core.useTheme(am4themes_animated);var t=am4core.create("mydata-chart",am4plugins_forceDirected.ForceDirectedTree).series.push(new am4plugins_forceDirected.ForceDirectedSeries),a=[];e.state.response.apps.forEach((function(e,t){a.push({name:e.title,value:16})})),t.data=a,t.dataFields.linkWith="linkWith",t.dataFields.category="category",t.dataFields.name="name",t.dataFields.id="name",t.dataFields.value="value",t.dataFields.children="children",t.dataFields.fixed="fixed",t.nodes.template.propertyFields.x="x",t.nodes.template.propertyFields.y="y",t.nodes.template.tooltipText="{name}",t.nodes.template.fillOpacity=1,t.nodes.template.label.text="{name}",t.fontSize=8,t.maxLevels=3,t.nodes.template.label.hideOversized=!0,t.nodes.template.label.truncate=!0,t.nodes.template.draggable=!0,t.nodePadding=10,t.nodes.template.events.on("hit",(function(t){e.state.modalCont=null,e.viewApp(t.target.label.currentText)}),r),l()})),t(this,"listeners",(function(){var e=r;((e,t)=>{if(document.querySelector(e))for(let a of document.querySelectorAll(e))a.removeEventListener("click",t,!0),a.addEventListener("click",t,!0)})(".btn-new-app",e.newApp),e.state.firstLoad})),t(this,"newApp",(function(e){e.preventDefault();var t=r;(t.state.modalCont||t.state.modal)&&t.state.modalCont.hide();var a="",i="",s="";t.state.modal=document.querySelector(".modal"),t.state.modalCont=new bootstrap.Modal(t.state.modal),history.pushState({pageID:"Data"},"Data",window.location.pathname+window.location.search+"#modal"),t.state.modal.querySelector(".modal-dialog").classList.add("modal-lg"),t.state.modal.querySelector(".modal-header .modal-title").innerHTML=n("Create Application"),t.state.modal.querySelector(".modal-body").innerHTML='\n\n            <div class="form-cont ge-form">\n\n                <div class="form-group row mb-3" >\n                    <label for="app-title" class="form-label col-lg-3 col-form-label">'.concat(n("Title"),'</label>\n                    <div class="col-lg-9">\n                        <input type="text" class="form-control form-control-lg" id="app-title" autocomplete="off" placeholder="" value="').concat(a,'" maxlength="32">\n                        <div class="invalid-feedback app-title-notice"></div> \n                        <p class="form-text">').concat(n("Application title can be only defined once."),'</p>\n                    </div>\n                </div>\n        \n                <div class="form-group row mb-3">\n                    <label for="app-description" class="form-label col-lg-3 col-form-label">').concat(n("Description"),'</label>\n                    <div class="col-lg-9">\n                        <textarea id="app-description" maxlength="1000" class="form-control" name="app-description" >').concat(i,'</textarea>\n                        <div class="invalid-feedback app-description-notice"></div>\n                        <ul class="list-group list-group-flush goods-suggestion mt-2" style="font-size: 14px;max-height:120px;overflow:scroll;display:none">\n                            <li class="list-group-item d-flex justify-content-between text-muted po " style="cursor: pointer;" data-i="0">\n\n                                Deployments\n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n\n                            </li>\n                            <li class="list-group-item d-flex justify-content-between text-muted po" data-i="1">\n                            \n                                Replicasets\n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n                                \n                            </li>\n                            <li class="list-group-item d-flex justify-content-between text-muted po" data-i="2">\n\n                                Pods    \n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n\n                            </li>\n                            <li class="list-group-item d-flex justify-content-between text-muted po" data-i="3">\n                            \n                                Services\n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n\n                            </li>\n                        </ul>\n                        <p class="form-text">').concat(n("Trade description of goods and marks and numbers, if any. Ex.: watch with serial #1234."),'</p>\n                    </div>\n                    \n                </div>\n                \n                <div class="form-group row mb-3">\n                    <label for="app-keywords" class="form-label col-lg-3 col-form-label">').concat(n("Keywords"),'</label>\n                    <div class="col-lg-9">\n                        <input type="text" class="form-control form-control-lg" id="app-keywords" autocomplete="off" placeholder="" value="').concat(s,'" maxlength="200">\n                        <div class="invalid-feedback app-keywords-notice"></div> \n                        <p class="form-text">').concat(n('Separate keywords by ",". Ex.: slider, banner, image.'),"</p>\n                    </div>\n                </div>\n\n            </div>"),t.state.modal.querySelector(".modal-footer").innerHTML='\n            <button type="button" class="btn btn-primary btn-modal btn-update-app">'.concat(n("Create"),'</button>\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">').concat(n("Close"),"</button>\n        "),t.state.modal.querySelector(".btn-update-app").addEventListener("click",(function(e){e.preventDefault();var a={};if(a.title=t.state.modal.querySelector("#app-title").value.trim(),a.description=t.state.modal.querySelector("#app-description").value.trim(),a.keywords=t.state.modal.querySelector("#app-keywords").value.trim(),a.status="0",a.img=[],a.cats=[],document.querySelector(".btn-update-app").dataset.loading)return!1;a.title.length<2?alert(__("Please provide longer title")):(o(),document.querySelector(".btn-update-app").dataset.loading=!0,document.querySelector(".btn-update-app").innerHTML='<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>'+n("Loading.."),fetch("https://apps.api.kenzap.cloud/",{method:"post",headers:c(),body:JSON.stringify({query:{app:{type:"create-app",data:a}}})}).then((function(e){return e.json()})).then((function(e){l(),document.querySelector(".btn-update-app").dataset.loading=!0,document.querySelector(".btn-update-app").innerHTML='<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>'+n("Create"),e.success?(u(n("Application created")),t.state.modalCont.hide(),t.getData()):411===e.code?alert(n("Application with same name already exists")):p(e)})).catch((function(e){p(e)})))})),t.state.modalCont.show()})),t(this,"viewApp",(function(e){var t=r;((e,t)=>{e=String(e),t=Object(t);var a={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var n in a)t.hasOwnProperty(n)||(t[n]=a[n]);var o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Å":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Å°":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","Å":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","Å±":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Î":"A","Î":"E","Î":"I","Î":"O","Î":"Y","Î":"H","Î":"W","Îª":"I","Î«":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","Î¬":"a","Î­":"e","Î¯":"i","Ï":"o","Ï":"y","Î®":"h","Ï":"w","ς":"s","Ï":"i","Î°":"y","Ï":"y","Î":"i","Å":"S","Ä°":"I","Ç":"C","Ü":"U","Ö":"O","Ä":"G","Å":"s","Ä±":"i","ç":"c","ü":"u","ö":"o","Ä":"g","Ð":"A","Ð":"B","Ð":"V","Ð":"G","Ð":"D","Ð":"E","Ð":"Yo","Ð":"Zh","Ð":"Z","Ð":"I","Ð":"J","Ð":"K","Ð":"L","Ð":"M","Ð":"N","Ð":"O","Ð":"P","Ð ":"R","Ð¡":"S","Ð¢":"T","Ð£":"U","Ð¤":"F","Ð¥":"H","Ð¦":"C","Ð§":"Ch","Ð¨":"Sh","Ð©":"Sh","Ðª":"","Ð«":"Y","Ð¬":"","Ð­":"E","Ð®":"Yu","Ð¯":"Ya","Ð°":"a","Ð±":"b","Ð²":"v","Ð³":"g","Ð´":"d","Ðµ":"e","Ñ":"yo","Ð¶":"zh","Ð·":"z","Ð¸":"i","Ð¹":"j","Ðº":"k","Ð»":"l","Ð¼":"m","Ð½":"n","Ð¾":"o","Ð¿":"p","Ñ":"r","Ñ":"s","Ñ":"t","Ñ":"u","Ñ":"f","Ñ":"h","Ñ":"c","Ñ":"ch","Ñ":"sh","Ñ":"sh","Ñ":"","Ñ":"y","Ñ":"","Ñ":"e","Ñ":"yu","Ñ":"ya","Ð":"Ye","Ð":"I","Ð":"Yi","Ò":"G","Ñ":"ye","Ñ":"i","Ñ":"yi","Ò":"g","Ä":"C","Ä":"D","Ä":"E","Å":"N","Å":"R","Š":"S","Å¤":"T","Å®":"U","Å½":"Z","Ä":"c","Ä":"d","Ä":"e","Å":"n","Å":"r","š":"s","Å¥":"t","Å¯":"u","Å¾":"z","Ä":"A","Ä":"C","Ä":"e","Å":"L","Å":"N","Ó":"o","Å":"S","Å¹":"Z","Å»":"Z","Ä":"a","Ä":"c","Ä":"e","Å":"l","Å":"n","ó":"o","Å":"s","Åº":"z","Å¼":"z","Ä":"A","Ä":"C","Ä":"E","Ä¢":"G","Äª":"i","Ä¶":"k","Ä»":"L","Å":"N","Š":"S","Åª":"u","Å½":"Z","Ä":"a","Ä":"c","Ä":"e","Ä£":"g","Ä«":"i","Ä·":"k","Ä¼":"l","Å":"n","š":"s","Å«":"u","Å¾":"z"};for(var n in t.replacements)e=e.replace(RegExp(n,"g"),t.replacements[n]);if(t.transliterate)for(var n in o)e=e.replace(RegExp(n,"g"),o[n]);var l="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");e=(e=(e=(e=e.replace(l,t.delimiter)).replace(RegExp("["+t.delimiter+"]{2,}","g"),t.delimiter)).substring(0,t.limit)).replace(RegExp("(^"+t.delimiter+"|"+t.delimiter+"$)","g"),""),t.lowercase&&e.toLowerCase()})(e);var a=t.state.response.apps.filter((function(t){return t.title==e}))[0];a&&(t.state.modal=document.querySelector(".modal"),t.state.modalCont=new bootstrap.Modal(t.state.modal),history.pushState({pageID:"Data"},"Data",window.location.pathname+window.location.search+"#modal"),t.state.modal.querySelector(".modal-dialog").classList.add("modal-lg"),t.state.modal.querySelector(".modal-header .modal-title").innerHTML=e,t.state.modal.querySelector(".modal-body").innerHTML='\n\n            <div class="form-cont ge-form">\n                <img style="width:100%;max-height:300px;" class="mb-3" src="/assets/images/application-1.svg">\n                <div class="form-group row mb-3 d-none"">\n                    <label for="app-title" class="form-label col-lg-3 col-form-label">'.concat(n("Title"),'</label>\n                    <div class="col-lg-9">\n                        <input type="text" class="form-control form-control-lg" id="app-title" autocomplete="off" placeholder="" value="').concat(a.title,'" maxlength="100">\n                        <div class="invalid-feedback app-title-notice"></div> \n                        <p class="form-text">').concat(n("Application title can be only defined once."),'</p>\n                    </div>\n                </div>\n        \n                <div class="form-group row mb-3 d-none">\n                    <label for="app-description" class="form-label col-lg-3 col-form-label">').concat(n("Description"),'</label>\n                    <div class="col-lg-9">\n                        <textarea id="app-description" maxlength="1000" class="form-control" name="app-description" >').concat(a.description,'</textarea>\n                        <div class="invalid-feedback app-description-notice"></div>\n                        <ul class="list-group list-group-flush goods-suggestion mt-2" style="font-size: 14px;max-height:120px;overflow:scroll;display:none;">\n                            <li class="list-group-item d-flex justify-content-between text-muted po " style="cursor: pointer;" data-i="0">\n\n                                Watch with serial #1234\n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n\n                            </li>\n                            <li class="list-group-item d-flex justify-content-between text-muted po" data-i="1">\n                            \n                                BMW 535 WIN 15445432458 \n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n                                \n                            </li>\n                            <li class="list-group-item d-flex justify-content-between text-muted po" data-i="2">\n\n                                Flash memory 8GB\n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n\n                            </li>\n                            <li class="list-group-item d-flex justify-content-between text-muted po" data-i="3">\n                            \n                                Golden ring 88888975\n                                <div class="">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files text-end po" viewBox="0 0 16 16" role="graphics-symbol">\n                                        <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>\n                                    </svg>\n                                </div>\n\n                            </li>\n                        </ul>\n                        <p class="form-text">').concat(n("Trade description of goods and marks and numbers, if any. Ex.: watch with serial #1234."),'</p>\n                    </div>\n                    \n                </div>\n                \n                <div class="form-group row mb-3">\n                    <label for="app-keywords" class="form-label col-lg-3 col-form-label">').concat(n("Keywords"),'</label>\n                    <div class="col-lg-9">\n                        <input type="text" class="form-control form-control-lg" id="app-keywords" autocomplete="off" placeholder="" value="').concat(a.keywords,'" maxlength="200">\n                        <div class="invalid-feedback app-keywords-notice"></div> \n                        <p class="form-text">').concat(n('Separate keywords by ",". Ex.: slider, banner, image.'),"</p>\n                    </div>\n                </div>\n\n            </div>"),t.state.modal.querySelector(".modal-footer").innerHTML='\n            <button type="button" class="btn btn-primary btn-modal btn-download-app">'.concat(n("Get Template"),'</button>\n            <button type="button" class="btn btn-danger btn-modal btn-delete-app "><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg></span></button>\n            <button type="button" class="btn btn-secondary d-none" data-bs-dismiss="modal">').concat(n("Close"),"</button>\n        "),t.state.modal.querySelector(".btn-download-app").addEventListener("click",(function(e){e.preventDefault(),u(n("Downloading")),o(),fetch("https://apps.api.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Kenzap-Locale":f("locale")?f("locale"):"en","Kenzap-Token":f("kenzap_token")},body:JSON.stringify({query:{download:{type:"download-app",id:a.id,data:[]}}})}).then((function(e){return e.blob()})).then((function(e){var t,o,i;l(),e.size<100?e.text().then((function(e){JSON.parse(e).success||u(n("Can not download template"))})):(t=e,o=a.slug+".zip",(i=document.createElement("a")).href=window.URL.createObjectURL(t),i.download=o,i.dispatchEvent(new MouseEvent("click")))})).catch((function(e){p(e)}))})),t.state.modal.querySelector(".btn-delete-app").addEventListener("click",(function(e){return e.preventDefault(),!document.querySelector(".btn-delete-app").dataset.loading&&!!confirm(__("Remove this application and all user data?"))&&(o(),document.querySelector(".btn-delete-app").dataset.loading=!0,document.querySelector(".btn-delete-app").innerHTML='<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>'+n("Loading.."),void fetch("https://apps.api.kenzap.cloud/",{method:"post",headers:c(),body:JSON.stringify({query:{app:{type:"delete-app",id:a.id,data:[]}}})}).then((function(e){return e.json()})).then((function(e){document.querySelector(".btn-delete-app").dataset.loading=!0,document.querySelector(".btn-delete-app").innerHTML='<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>'+n("Create"),e.success?(u(n("Application removed")),t.state.modalCont.hide(),t.getData()):p(e)})).catch((function(e){p(e)})))})),t.state.modalCont.show())})),t(this,"cache",(function(){localStorage.setItem(r.id,JSON.stringify(r.state))})),this.state={firstLoad:!0,html:"",data:{},ajaxQueue:0,limit:25,responseKey:[],modal:null,modalCont:null,editor:{}},this.initDashboard()},h&&e(m.prototype,h),v&&e(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m)}();
